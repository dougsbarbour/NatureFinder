<ng-container *ngIf="model$ | async as model">
  <div class="card main" [ngStyle]="{'background-image': 'url(assets/images/habitats/'+model.habitats()[0]+'.jpg'}">
    <div class="card-body main-page">
      <div class="media">
        <div id="carousel" class="carousel slide" data-ride="carousel">
          <ol class="carousel-indicators">
            <ng-container *ngFor="let medium of model.media; let i=index">
              <li data-target="#carousel" [attr.data-slide-to]="i" [attr.class]="i == 0 ? 'active' : ''"></li>
            </ng-container>
          </ol>
          <div class="carousel-inner">
            <ng-container *ngFor="let medium of model.media; let i=index">
              <div class="carousel-item {{i == 0 ? 'active' : ''}}">
                <ng-container *ngIf="medium.tagName == 'img'">
                  <img class="d-block w-100"
                       [src]="imageFilenameMatching(medium.fileName,model.commonName)"
                       [alt]="medium.title">
                </ng-container>
                <ng-container *ngIf="medium.tagName == 'video'">
                  <video controls class="d-block w-100"
                         [src]="videoFilenameMatching(medium.fileName,model.commonName)">
                    {{medium.title}}
                  </video>
                </ng-container>
                <ng-container *ngIf="medium.tagName == 'audio'">
                  <div class="row">
                    <div class="col">
                      <img class="audio-spacer" src="../../assets/images/1x1.png" alt="">
                    </div>
                    <div class="w-100"></div>
                    <div class="col">
                      <audio controls class="mx-auto d-block w-75"
                             [src]="audioFilenameMatching(medium.fileName,model.commonName)"></audio>
                    </div>
                    <div class="w-100"></div>
                    <div class="col">
                      <img class="audio-spacer" src="../../assets/images/1x1.png" alt="">
                    </div>
                  </div>
                </ng-container>
                <div class="carousel-caption d-none d-md-block">
                  <h5>{{medium.title}}</h5>
                  <h6>{{medium.caption}}</h6>
                  <h6>{{medium.credits}}</h6>
                </div>
              </div>
            </ng-container>
          </div>
          <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
        <div class="media-body">
          <app-organism-detail [model]="model" [customTemplate]="customTemplate"></app-organism-detail>
        </div>
      </div>
      <div class="bottom-nav">
        <app-organism-navigation [model]="model"></app-organism-navigation>
      </div>
    </div>
  </div>
</ng-container>
