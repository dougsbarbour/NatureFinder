<div class="card card-default main">
  <div class="main-page">
    <div class="card-heading">
      <h3 class="search-header">Search {{modelNamePlural | titlecase}}</h3>
    </div>
    <div class="card-body" style="position:relative">
      <div class="accordion" id="accordion">
        <div class="card">
          <div class="card-header" id="showAllHeader">
            <div class="row">
              <div class="col">
                <button class="btn btn-success" [routerLink]="['/' + modelNamePlural]" aria-controls="showAll"
                        [queryParams]="{ sortBy: sortBy }">
                  Show All
                </button>
              </div>
            </div>
          </div>
        </div>
        <ng-content></ng-content>
        <ng-container *ngIf="(allHabitats$ | async)?.length > 0 ">
          <div class="card">
            <div class="card-header" id="searchByHabitatHeader">
              <button class="btn btn-success collapsed" data-toggle="collapse" data-target="#searchByHabitat"
                      aria-expanded="false" aria-controls="searchByHabitat">
                Search By Habitat
              </button>
            </div>
            <div class="collapse" id="searchByHabitat" aria-labelledby="searchByHabitatHeader" data-parent="#accordion">
              <div class="card-body">
                <div class="row ml-5">
                  <div class="col" *ngFor="let habitat of allHabitats$ | async">
                    <a class="btn btn-success" [routerLink]="['/' + modelNamePlural]"
                       [queryParams]="{ habitat: habitat, sortBy: sortBy }">
                      Find {{modelNamePlural | titlecase}} in a {{habitat}} habitat</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
        <ng-container *ngIf="(allColors$ | async)?.length > 0">
          <div class="card">
            <div class="card-header" id="searchByColorHeader">
              <button class="btn btn-success collapsed" data-toggle="collapse" data-target="#searchByColor"
                      aria-expanded="false" aria-controls="searchByColor">
                Search By Prominent Color
              </button>
            </div>
            <div class="collapse" id="searchByColor" aria-labelledby="searchByColorHeader" data-parent="#accordion">
              <div class="card-body">
                <div class="row ml-5 colors">
                  <div class="col" *ngFor="let color of allColors$ | async">
                    <a class="btn btn-success"
                       [style.border-color]="colorButtonBorder(color)"
                       [style.background-color]="colorButtonBackground(color)"
                       [routerLink]="['/' + modelNamePlural]"
                       [queryParams]="{ color: color, sortBy: sortBy }"
                       [innerHTML]="colorButtonText(color)"></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
        <ng-container *ngIf="(allSeasons$ | async)?.length > 0">
          <div class="card">
            <div class="card-header" id="searchBySeasonHeader">
              <button class="btn btn-success collapsed" data-toggle="collapse" data-target="#searchBySeason"
                      aria-expanded="false" aria-controls="searchBySeason">
                Search By Season
              </button>
            </div>
            <div class="collapse" id="searchBySeason" aria-labelledby="searchBySeasonHeader" data-parent="#accordion">
              <div class="card-body">
                <div class="row ml-5">
                  <div class="col" *ngFor="let season of allSeasons$ | async">
                    <a class="btn btn-success"
                       [routerLink]="['/' + modelNamePlural]"
                       [queryParams]="{ season: season, sortBy: sortBy }">{{season | titlecase}}</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
        <div class="card">
          <div class="card-header" id="searchByLetterHeader">
            <button class="btn btn-success collapsed" data-toggle="collapse" data-target="#searchByLetter"
                    aria-expanded="false" aria-controls="searchByLetter">
              Search By Letter of Alphabet
            </button>
          </div>
          <div class="collapse" id="searchByLetter" aria-labelledby="searchByLetterHeader" data-parent="#accordion">
            <div class="card-body">
              <div class="row justify-content-center">
                <ng-container *ngFor="let ltr of allLetters; index as i">
                  <ng-container *ngIf="i == 13">
                    <div class="w-100 d-none d-lg-block"></div>
                  </ng-container>
                  <div class="col">
                    <a class="btn btn-success keyboard-btn" [routerLink]="['/' + modelNamePlural]"
                       [queryParams]="{ commonNameWordStarting: ltr, sortBy: sortBy }">{{ltr}}</a>
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="searchByCommonNameHeader">
            <button class="btn btn-success collapsed" data-toggle="collapse" data-target="#searchByCommonName"
                    aria-expanded="false" aria-controls="searchByCommonName">
              Search By Common Name
            </button>
          </div>
          <div class="collapse" id="searchByCommonName" aria-labelledby="searchByCommonNameHeader"
               data-parent="#accordion">
            <div class="card-body">
              <form #commonNameForm="ngForm" (ngSubmit)="onSubmit(commonNameForm.value)" class="ml-5">
                <div class="form-group">
                  <label for="commonNameField"><h5>Common Name</h5></label>
                  <input type="text" class="form-control" id="commonNameField" required [(ngModel)]="model.commonName"
                         name="commonName">
                </div>
                <button type="submit" class="btn btn-success" id="commonNameSubmit">Search
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="bottom-nav">
      <div class="row">
        <div class="col-sm-2">
          <button class="btn btn-success org-nav-btn" onclick="window.location.href = '/';">Start over</button>
        </div>
      </div>
    </div>
  </div>
</div>
